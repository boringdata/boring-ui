# Prometheus scrape configuration for boring-ui observability stack.
#
# Bead: bd-223o.4 (P4)
#
# Scrapes the workspace API and control plane /metrics endpoints.
# Alert rules are loaded from rules.yaml (generated by export_prometheus_rules.py).

global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - "rules.yaml"

alerting:
  alertmanagers:
    - static_configs:
        - targets:
            - "alertmanager:9093"

scrape_configs:
  # Workspace API (boring-ui backend).
  - job_name: "boring-ui-workspace"
    metrics_path: "/metrics"
    static_configs:
      - targets:
          - "host.docker.internal:8000"
        labels:
          service: "boring-ui"
          component: "workspace-api"

  # Control plane API (when deployed).
  - job_name: "boring-ui-control-plane"
    metrics_path: "/metrics"
    static_configs:
      - targets:
          - "host.docker.internal:8001"
        labels:
          service: "boring-ui"
          component: "control-plane"

  # Prometheus self-monitoring.
  - job_name: "prometheus"
    static_configs:
      - targets:
          - "localhost:9090"
